# Redis란?

**Redis(Remote Dictionary Server)** : dictionary 구조 즉, key-value 형태로 데이터를 저장하고 관리하는 서버

> 💡 고성능 키-값 저장소로서 문자열, 해시, 셋, 정렬된 셋 형식의 데이터를 지원하는 NoSQL

<br>

## Redis 특징

- 데이터베이스, **캐시**, 메시지 브로커 및 스트리밍 엔진으로 사용되는 오픈소스, 지원하는 **인메모리** 데이터 구조 저장소

  > 💡 **캐시**란, 미리 결과를 저장하여, 후에 오는 요청에 대해서 DB나 API를 참조하지 않고, 효율적으로 요청을 처리하게 하는 서비스

  > 💡 **인메모리**란, 서버의 주기억장치인 RAM에 데이터를 올려 사용하는 방법. <br> - **장점** : 데이터를 저장하고 조회할 때 디스크를 오가지 않기 때문에 수백배 이상 속도가 빠름 <br> - **단점** : 서버 메모리 용량으로 인한 데이터 유실 발생. 휘발성 정보

<br>

- 문자열, 해시, 목록, 집합, 범위 쿼리가 있는 정렬된 집합, 비트맵, 하이퍼로그, 지리 공간 인덱스 및 스트림과 같은 **컬렉션** 제공
  <img src="https://github.com/Fun-Fun-Study/CS-Study/assets/73164347/00dd779c-2971-418a-87b4-af37716cbf9b">

<br>

- 복제, Lua 스크립팅, LRU 축출, 트랜잭션 및 다양한 수준의 디스크 지속성이 내장되어 있어 **고가용성**을 제공

<br>

- Redis Sentinel 및 Redis 클러스터를 통한 **자동 파티셔닝** 제공

<br>

- **영속성**(persistence)을 지원하여 서버가 꺼지더라도 데이터 로드 가능
  - **_데이터를 DISK에 저장하는 방식_** <br> - **Snapshotting** 방식 : 순간적으로 메모리에 있는 내용을 DISK에 전체를 옮겨 담음 <br> - **AOF**(Append On File) Redis의 모든 write/update 연산 자체를 모두 log 파일에 기록하는

<br>

- **Single Thread**로 동작하여 Race condition에 빠지는 것을 방지

<br>

- **트랜잭션**을 지원하지만, Rollback은 지원하지 않음 (실패한 명령 제외, 실행)
  > **RDB의 원자성** -> 오류 발생 시 트랜잭션이 롤백<br>**Redis의 원자성** --> Single Thread로 동작하며 중간에 다른 요청이 들어오지 않음

<br>

## Redis 사용 시 주의할 점

- 인메모리 데이터 저장소 특성상, 서버에 장애가 발생했을 경우 데이터 유실이 발생할 수 있음. 따라서 이에 대한 **운영 플랜**이 요구됨

<br>

- 서버 장애를 발생시키지 않도록 **메모리 관리**가 중요

<br>

- 싱글 스레드로 동작하기 때문에 한 번에 하나의 명령만 처리, 따라서 **시간이 오래 걸리는 요청은 피하는 것**이 유리

<br>

- 유실되어도 비교적 무방한 데이터들을 저장하여 사용
  <br>

## Redis 사용처

- 캐시 데이터베이스 서버로서 사용
  - 인증 토큰 등을 저장
  - Ranking 보드
  - 유저 API Limit
  - Job Queue 등

<br>

- 여러 서버에서 같은 데이터를 공유하고 싶은 경우 사용
  - Redis 자체가 Atomic 하기 때문에, **Thread Safe**함
