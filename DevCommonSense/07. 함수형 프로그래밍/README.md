# 함수형 프로그래밍

> 함수형 프로그래밍은 자료 처리를 수학적 함수의 계산으로 취급하고 상태와 가변 데이터를 지양하는 프로그래밍 패러다임이다.

- 상태나 입력 데이터를 변경하지 않는 함수들의 조합을 통해 프로그래밍하는 패러다임

## 함수형 프로그래밍의 특징

> 부수 효과가 없는 순수 함수를 1급 객체로 간주하여 파라미터나 반환값으로 사용할 수 있으며, 참조 투명성을 지킬 수 있다.

### 부수 효과(Side Effect)

- 다음과 같은 변화가 발생하는 작업
  - 변수의 값이 변경
  - 자료 구조를 제자리에서 수정함
  - 객체의 필드 값을 설정함
  - 예외나 오류가 발생하며 실행이 중단됨
  - 콘솔 또는 파일 I/O가 발생함
- 부수 효과가 있는 경우 함수의 실행이 쓰레드에 대해 안전하지 않다고 할 수 있다

### 순수 함수(Pure Function)

- 외부 환경으로부터 독립됨
  - 외부 상태를 변경하거나 외부의 값을 참조하지 않음
- 같은 인풋에 대해 언제나 동일한 아웃풋이 나오는 함수
- 독립적이고 부수효과가 없기 때문에 쓰레드에 안전하며 병렬 처리를 동기화 없이 진행 할 수 있다.

### 1급 객체(First-Class Object)

- 다음의 특징을 지니는 객체
  - 변수나 데이터 구조에 담을 수 있음
  - 파라미터로 전달 가능
  - 반환 값으로 사용 가능
  - 할당에 사용된 이름과 무관하게 고유하게 구별
- 함수형에서는 함수는 1급 객체로 취급
  - 파라미터로 넘기는 등의 작업이 가능

### 참조 투명성(Referential Transperency)

- 동일한 인자에 대해 항상 동일한 결과 반환
- 참조 투명성을 통해 기존 값은 변경되지 않고 유지된다.(Immutable Data)

## 함수형 프로그래밍의 요소들

### 순수 함수

- 부작용이 없고 함수의 실행이 외부에 영향을 미치지 않는 함수
  - 같은 입력에 대해 언제나 같은 결과가 나옴
- 스레드에 안전하고 병렬 연산이 가능
- f가 순수 함수라고 하면
  ```
  y = f(x) * f(x)
  ```
  이 식을 다음과 같이 최적화 가능
  ```
  z = f(x)
  y = z * z
  ```
  f(x)의 결과가 같은 x에 대해 언제나 같으므로 f를 한번만 실행하고 그 결과를 곱해도 같은 결과가 나온다.
- f가 순수 함수가 아닌 경우 이런 방식은 불가능
  ```
  y = random() * random()
  ```
  random은 호출할 때마다 결과가 달라지는 함수 <- 순수함수가 아님
  ```
  z = random()
  y = z * z
  ```
  따라서 두 식은 서로 다른 결과가 나옴
  - 난수 생성 함수의 경우 대부분의 실제 구현에서 내부의 상태값이 변하는 방식으로 구현되어 있다.
- 외부 출력이 있는 함수도 순수 함수가 아님
  ```
  y = print("x") * print("x")
  ```
  print 함수는 화면에 글자를 출력하고 성공 여부에 따라 1 또는 0을 반환한다. 따라서 정상적인 경우 y는 1이지만 출력에 실패한 경우 0이 되므로 순수 함수가 아니다.

### 익명함수(Anonymous Function)

- 이름이 없는 함수
- 명령형 언어에서는 모든 함수에 이름이 있어야하는데 함수형에서는 이름이 없는 함수를 생성할 수 있다.
- Java에서 사용하는 람다식

### 고계 함수(Higher-order Function)

- 함수를 다루는 함수
- 함수형 언어에서 함수 또한 값으로 취급되기 때문에 함수를 인자로 전달할 수 있고 반환할 수도 있다.
